(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{36:function(e,t,n){},43:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(14),s=n.n(c),a=n(5),i=(n(36),n(15)),u=n(2),o=n(16),l=n(3),j=n(7),d="ALERT_REQUEST",f="ALERT_SUCCESS",b="ALERT_ERROR",O="ALERT_CLEAR",p="ALERT_INFO",m="USERS_REGISTER_REQUEST",g="USERS_REGISTER_SUCCESS",h="USERS_REGISTER_FAILURE",S="USERS_LOGIN_REQUEST",E="USERS_LOGIN_SUCCESS",v="USERS_LOGIN_FAILURE",y="USERS_LOGOUT",x="USERS_GETALL_REQUEST",_="USERS_GETALL_SUCCESS",R="USERS_GETALL_FAILURE",T="USERS_DELETE_REQUEST",C="USERS_DELETE_SUCCESS",U="USERS_DELETE_FAILURE",N="USERS_FETCH_REQUEST",I="USERS_FETCH_SUCCESS",L="USERS_FETCH_FAILURE",k="ADDED_ITEM_SUCCESS",w="RESET_INPUT_FIELD",A={success:function(e){return{type:f,message:e}},info:function(e){return{type:p,message:e}},error:function(e){return{type:b,message:e}},clear:function(){return{type:O}}};var F=n(8),P=n.n(F),D=n(11),J={login:function(e,t){return Q.apply(this,arguments)},logout:H,delete:function(e,t,n){return B.apply(this,arguments)},getlist:function(e,t){return M.apply(this,arguments)},additem:function(e,t,n){return Y.apply(this,arguments)}},G="http://localhost:5000/";function Q(){return(Q=Object(D.a)(P.a.mark((function e(t,n){var r,c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})},e.next=3,fetch(G+"users/authenticate",r);case 3:return c=e.sent,e.next=6,z(c);case 6:return s=e.sent,localStorage.setItem("user",JSON.stringify(s)),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return q.apply(this,arguments)}function q(){return(q=Object(D.a)(P.a.mark((function e(t,n){var r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,token:n})},e.next=3,fetch(G+"users/logout",r);case 3:return c=e.sent,localStorage.removeItem("user"),e.abrupt("return",z(c));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(D.a)(P.a.mark((function e(t,n,r){var c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,token:n,itemID:r})},e.next=3,fetch(G+"users/delete",c);case 3:return s=e.sent,e.abrupt("return",z(s));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(D.a)(P.a.mark((function e(t,n){var r,c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,token:n})},e.next=3,fetch(G+"users/getlist",r);case 3:return c=e.sent,e.next=6,z(c);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(D.a)(P.a.mark((function e(t,n,r){var c,s,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,token:n,newitem:r})},e.next=3,fetch(G+"users/additem",c);case 3:return s=e.sent,e.next=6,z(s);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return e.text().then((function(t){if(e.ok){var n=t&&JSON.parse(t);return n.ok?n:Promise.reject(n.statusText)}if(401===e.status&&H(),500===e.status)return Promise.reject(e.statusText);var r=t&&JSON.parse(t),c=r&&r.message||e.statusText;return Promise.reject(c)}))}n(28),JSON.parse(localStorage.getItem("users"));var K=n(6),V=Object(K.b)(),W=n(9),X=n(25),Z=JSON.parse(localStorage.getItem("user")),$=Z?{loggedIn:!0,user:Z}:{};var ee=Object(W.b)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)({},e),{},{alertClass:"alert-request",message:t.message});case f:return Object(l.a)(Object(l.a)({},e),{},{alertClass:"alert-success",message:t.message});case p:return Object(l.a)(Object(l.a)({},e),{},{alertClass:"alert-info",message:t.message});case b:return Object(l.a)(Object(l.a)({},e),{},{alertClass:"alert-danger",message:t.message});case O:return{};default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(l.a)(Object(l.a)({},e),{},{loggingIn:!0,user:t.user});case E:return Object(l.a)(Object(l.a)({},e),{},{loggedIn:!0,loggingIn:!1,user:t.user});case v:case y:return{};case N:return Object(l.a)(Object(l.a)({},e),{},{fetching:!0});case I:return Object(l.a)(Object(l.a)({},e),{},{fetching:!1,list:t.data});case L:return Object(l.a)(Object(l.a)({},e),{},{fetching:!1});case k:return Object(l.a)(Object(l.a)({},e),{},{added:!0,list:t.data});case w:return Object(l.a)(Object(l.a)({},e),{},{added:!1});case T:return Object(l.a)(Object(l.a)({},e),{},{delItem:!0});case C:return Object(l.a)(Object(l.a)({},e),{},{list:t.data,delItem:!1});case U:return Object(l.a)(Object(l.a)({},e),{},{delItem:!1});default:return e}}}),te=n(22),ne=Object(W.d)(ee,Object(te.a)(Object(W.a)(X.a)));var re={login:function(e,t,n){return function(r){r({type:S,user:{username:e}}),J.login(e,t).then((function(e){r(function(e){return{type:E,user:e}}(e)),r({type:f,message:"Loggged in successfully"}),n("/home"),r(ce(e.id,e.token))}),(function(e){r(function(e){return{type:v,error:e}}(e.toString())),r(A.error(e.toString()))}))}},logout:function(e,t){return function(n){J.logout(e,t).then((function(e){n({type:y}),n({type:p,message:e.statusText})}),(function(e){n(A.error(e.toString()))}))}},delete:function(e,t,n,r,c){return function(s){s({type:T}),J.delete(e,t,r).then((function(e){n.splice(c,1),s(function(e){return{type:C,data:e}}(n)),s({type:f,message:"Deleted Successfully"})}),(function(e){s(function(e){return{type:U,error:e}}(e.toString())),s({type:b,message:e.toString()})}))}},resetAlert:function(){return{type:O}},getList:ce,addItem:function(e,t,n,r){return function(c){J.additem(e,t,n).then((function(e){var t=e.id;r.push([n,t]),c(A.success("Successfully added")),c({type:k,data:r})}),(function(e){c(A.error(e.toString()))}))}},register:function(e){return function(t){t(function(e){return{type:m,user:e}}(e)),J.register(e).then((function(e){t(function(e){return{type:g,user:e}}()),V.push("/login"),t(A.success("Registration successful"))}),(function(e){t(function(e){return{type:h,error:e}}(e.toString())),t(A.error(e.toString()))}))}},getAll:function(){return function(e){e({type:x}),J.getAll().then((function(t){return e(function(e){return{type:_,users:e}}(t))}),(function(t){return e(function(e){return{type:R,error:e}}(t.toString()))}))}}};function ce(e,t){return function(n){n({type:N}),J.getlist(e,t).then((function(e){n({type:I,data:e.list})}),(function(e){n({type:L}),n(A.error(e.toString()))}))}}var se=n(1);function ae(){var e=Object(r.useState)({username:"",password:""}),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),i=Object(j.a)(s,2),d=i[0],f=i[1],b=n.username,O=n.password,p=Object(a.c)((function(e){return e.authentication.loggingIn})),m=Object(a.b)(),g=Object(u.f)();function h(e){var t=e.target,n=t.name,r=t.value;c((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},n,r))}))}return Object(se.jsxs)("div",{className:"col-lg-6",children:[Object(se.jsx)("h2",{children:"Login"}),Object(se.jsxs)("form",{name:"form",onSubmit:function(e){e.preventDefault(),f(!0),b&&O&&m(re.login(b,O,g))},children:[Object(se.jsxs)("div",{className:"form-group",children:[Object(se.jsx)("label",{children:"Username"}),Object(se.jsx)("input",{type:"text",name:"username",value:b,onChange:h,className:"form-control"+(d&&!b?" is-invalid":"")}),d&&!b&&Object(se.jsx)("div",{className:"invalid-feedback",children:"Username is required"})]}),Object(se.jsxs)("div",{className:"form-group",children:[Object(se.jsx)("label",{children:"Password"}),Object(se.jsx)("input",{type:"password",name:"password",value:O,onChange:h,className:"form-control"+(d&&!O?" is-invalid":"")}),d&&!O&&Object(se.jsx)("div",{className:"invalid-feedback",children:"Password is required"})]}),Object(se.jsx)("div",{className:"form-group",children:Object(se.jsxs)("button",{className:"btn btn-primary",children:[p&&Object(se.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login"]})})]})]})}n(43);var ie=n(26),ue=n(27);var oe=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.authentication.user})),n=Object(a.c)((function(e){return e.authentication.list})),c=Object(a.c)((function(e){return e.authentication.fetching}));return Object(r.useEffect)((function(){n||c||!t.token||setTimeout((function(){console.log("nothing")}),3e3)})),Object(se.jsxs)(se.Fragment,{children:[c&&Object(se.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),!n&&!c&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("span",{children:"...OOPS "}),Object(se.jsx)("br",{}),Object(se.jsx)("button",{className:"btn btn-light",onClick:function(n){e(re.getList(t.id,t.token)),console.log("dv",t)},children:"RETRY"})]}),n&&n.map((function(r,c){return Object(se.jsxs)("div",{className:"list-item-div ".concat(c%2?"":"altclr"),children:[Object(se.jsx)("span",{children:r[0]+"-"+new Date(100*r[1]+16e9)}),Object(se.jsx)("button",{onClick:function(){return function(r,c){e(re.delete(t.id,t.token,n,r,c))}(r[1],c)},children:Object(se.jsx)(ie.a,{icon:ue.a})})]},c+"".concat(r[1]))}))]})};n(49);var le=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),i=Object(j.a)(s,2),u=(i[0],i[1]),o=Object(a.b)(),l=Object(a.c)((function(e){return e.authentication.user})),d=Object(a.c)((function(e){return e.authentication.list}));return Object(a.c)((function(e){return e.authentication.added}))&&(c(""),o({type:w})),Object(se.jsx)("div",{className:"add_item_parent_div",children:Object(se.jsxs)("div",{children:[Object(se.jsx)("input",{onChange:function(e){var t=e.target.value;c(t)},name:"newItem",value:n,placeholder:"Add new___"}),Object(se.jsx)("button",{onClick:function(e){e.preventDefault(),u(!0),n?(o(re.addItem(l.id,l.token,n,d)),u(!1)):o(A.error("Empty element can't be added !"))},type:"button",children:"+Add"})]})})};function je(){var e=Object(a.c)((function(e){return e.authentication.user})),t=Object(a.b)(),n=Object(u.f)();return Object(se.jsxs)("div",{children:[Object(se.jsxs)("div",{className:"username_logout_div",children:[Object(se.jsxs)("h1",{children:["Hi ",e.firstName,"!"]}),Object(se.jsx)("button",{className:"",onClick:function(){t(re.logout(e.username,e.token)),n("/login")},children:"Logout"})]}),Object(se.jsx)(le,{}),Object(se.jsx)(oe,{})]})}var de=function(){var e=Object(a.c)((function(e){return e.authentication.loggedIn})),t=Object(a.c)((function(e){return e.alert})),n=Object(a.b)();return t.alertClass&&setTimeout((function(){return n(re.resetAlert())}),2500),Object(se.jsxs)("div",{children:[Object(se.jsx)("div",{className:"alertBox col-7 offset-2 col-md-5 offset-md-3",children:t.alertClass&&Object(se.jsxs)("div",{className:"alert ".concat(t.alertClass),children:[" ",t.message," "]})}),Object(se.jsx)("div",{className:"main col-10 offset-1 col-sm-7 offset-sm-2",children:e?Object(se.jsx)(je,{}):Object(se.jsx)(ae,{})})]})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};s.a.render(Object(se.jsx)(a.a,{store:ne,children:Object(se.jsx)(i.a,{children:Object(se.jsx)(u.c,{children:Object(se.jsx)(u.a,{path:"*",element:Object(se.jsx)(de,{className:"app"})})})})}),document.getElementById("root")),fe()}},[[50,1,2]]]);
//# sourceMappingURL=main.2e537a7f.chunk.js.map